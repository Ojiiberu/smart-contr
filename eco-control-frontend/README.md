# Eco Control Dashboard

Это фронтенд-приложение для взаимодействия с смарт-контрактами EcoControl и EcoToken, а также для отображения данных о загрязнении воздуха с API WAQI.

## Функциональность

- Подключение к Ethereum-кошельку (MetaMask)
- Отображение списка предприятий с их балансами токенов
- Отображение текущих лимитов загрязнения и фактических показателей
- Возможность изменять лимиты загрязнения для предприятий
- Запуск функции проверки соответствия (checkCompliance) для начисления штрафов

## Требования

- Node.js версии 16.x или выше
- MetaMask или другой Ethereum-кошелек
- Запущенный локальный узел Hardhat (`npx hardhat node`)
- Развернутые контракты (`npx hardhat run scripts/deploy.js --network localhost`)
- API-токен от WAQI (можно получить на [официальном сайте](https://aqicn.org/data-platform/token/))

## Установка и запуск

1. Установите зависимости:
   ```
   npm install
   ```

2. Запустите локальный узел Hardhat (в отдельном терминале):
   ```
   npx hardhat node
   ```

3. Разверните контракты (в отдельном терминале):
   ```
   npx hardhat run scripts/deploy.js --network localhost
   ```

4. Запустите фронтенд:
   ```
   npm run dev
   ```

5. Откройте приложение в браузере по адресу: `http://localhost:5173/`

## Использование

1. Подключите MetaMask к локальной сети Hardhat (http://localhost:8545)
2. Нажмите кнопку "Подключить кошелек"
3. Введите API токен WAQI в соответствующее поле и нажмите "Загрузить данные API"
4. Управляйте лимитами загрязнения и запускайте проверки соответствия для каждого предприятия

## Важное замечание

Для корректной работы функции проверки соответствия (checkCompliance) ваш подключенный аккаунт должен иметь роль `dataProcessorCaller` в контракте EcoControl. Эту роль можно назначить через вызов функции `setDataProcessorCaller` в контракте.

Также предприятия должны иметь одобрение на перевод токенов (approve) в пользу контракта EcoControl, чтобы штрафы могли списываться с их адресов.
